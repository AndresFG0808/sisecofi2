# üìä ESPECIFICACI√ìN EST√ÅNDAR PARA REPORTES JSON SISECOFI

## üéØ DESCRIPCI√ìN GENERAL

Este documento define el formato est√°ndar obligatorio para todos los reportes de soluci√≥n de hallazgos en formato JSON. TODOS los asistentes de IA deben seguir estas especificaciones exactas para mantener consistencia y calidad en los informes generados.

---

## üìã ESTRUCTURA JSON OBLIGATORIA

```json
{
  "nombreReporte": "string",
  "descripcion_corta": "string",
  "descripcion_detallada": "string", 
  "descripcion_problema_solucion_input": ["array de strings"],
  "microservicio_input": ["array de strings"],
  "puerto_input": ["array de strings"],
  "ruta_input": ["array de strings"],
  "base_datos": "string",
  "tablas_input": ["array de strings"],
  "columnas_input": ["array de strings"],
  "estado": "string",
  "cantidad_archivos": number,
  "cantidad_pruebas": number,
  "pruebas_realizadas": [
    {
      "numero": number,
      "descripcion": "string",
      "detalles": [
        {"texto": "string"}
      ],
      "tabla_datos": [
        {
          "key": "string",
          "type": "Text|Number|Boolean|File",
          "value": "string"
        }
      ]
    }
  ],
  "modificaciones": [
    {
      "numero": number,
      "titulo": "string",
      "lineas": [
        {
          "numero": "number|string",
          "texto": "string"
        }
      ]
    }
  ]
}
```

---

## üîß REGLAS ESPEC√çFICAS POR CAMPO

### 1. **nombreReporte**
- **Formato**: `Solucion_[Hallazgo#]_[ModuloFuncionalidad]`
- **Ejemplo**: `"Solucion_Hallazgo4_AsignarProyectos"`
- **Obligatorio**: S√≠

### 2. **descripcion_corta**
- **Longitud**: M√°ximo 100 caracteres
- **Formato**: Descripci√≥n directa del problema/soluci√≥n
- **Ejemplo**: `"Campo Id proyecto mantiene funcionalidad editable seg√∫n especificaci√≥n EIU"`
- **Obligatorio**: S√≠

### 3. **descripcion_detallada**
- **Contenido**: An√°lisis completo con referencias a documentaci√≥n
- **Incluir**: ECU/EIU/CRN, RNA aplicables, cambios t√©cnicos
- **Formato**: P√°rrafo coherente y t√©cnico
- **Obligatorio**: S√≠

### 4. **descripcion_problema_solucion_input**
- **Tipo**: Array de strings
- **Contenido**: 3-5 puntos clave del problema y soluci√≥n
- **Formato**: Cada string es un punto espec√≠fico
- **Obligatorio**: S√≠

### 5. **microservicio_input**
- **Valores v√°lidos**: 
  - `"AdminContratos"`, `"AdminDevengados"`, `"AdminGeneral"`, `"Catalogos"`, `"Proveedores"`, `"Proyectos"`, `"ReporteDocumental"`, `"WebSerCfdi"`, `"WebSerDirectorioActivo"`
  - `["N/A"]` para cambios solo de frontend
- **Formato**: Array de strings entre comillas
- **Obligatorio**: S√≠

### 6. **puerto_input**
- **Fuente**: `src/main/resources/application.properties` ‚Üí `server.port=[NUMERO]`
- **Formato**: Array de strings `["9191"]`
- **Valor N/A**: `["N/A"]` para frontend √∫nicamente
- **Obligatorio**: S√≠

### 7. **ruta_input**
- **Estructura**: `["http://localhost:[PUERTO][PATH_BASE][endpoint]"]`
- **Ejemplo**: `["http://localhost:9191/asignar-proyecto/buscar"]`
- **Valor N/A**: `["N/A"]` para frontend √∫nicamente
- **Obligatorio**: S√≠

### 8. **base_datos**
- **Valor t√≠pico**: `"sisecofi"`
- **Valor N/A**: `"N/A"` si no hay cambios de BD
- **Obligatorio**: S√≠

### 9. **tablas_input** / **columnas_input**
- **Formato**: Array de strings con nombres exactos
- **Ejemplo**: `["proyecto", "usuario_proyecto"]`
- **Valor N/A**: `["N/A"]` si no hay cambios de BD
- **Obligatorio**: S√≠

### 10. **estado**
- **Valores v√°lidos**:
  - `"PENDIENTE"` - Requiere implementaci√≥n
  - `"SOLUCIONADO"` - Cambios implementados
  - `"ANALIZADO"` - Solo an√°lisis, no requiere cambios
  - `"FALSO_POSITIVO"` - Hallazgo sin fundamento
- **Obligatorio**: S√≠

### 11. **cantidad_archivos** / **cantidad_pruebas**
- **Tipo**: N√∫meros enteros
- **Valor**: Debe coincidir con arrays `modificaciones` y `pruebas_realizadas`
- **Obligatorio**: S√≠

### 12. **pruebas_realizadas**
- **Estructura**: Array de objetos con numero, descripcion, detalles, tabla_datos
- **tabla_datos**: Puede ser array vac√≠o `[]` para frontend √∫nicamente
- **Obligatorio**: S√≠, m√≠nimo 1 prueba

### 13. **modificaciones**
- **CR√çTICO**: Incluir TODOS los archivos analizados (modificados o no)
- **Tipos de archivos**: Frontend, Backend, BD, Documentaci√≥n, Configuraci√≥n, Informes
- **lineas.numero**: N√∫mero real de l√≠nea o rango `"477-482"`
- **lineas.texto**: Descripci√≥n del an√°lisis/cambio realizado
- **Obligatorio**: S√≠, m√≠nimo 1 archivo

---

## üé® REGLAS POR TIPO DE CAMBIO

### **üì± CAMBIOS SOLO FRONTEND**
```json
{
  "microservicio_input": ["N/A"],
  "puerto_input": ["N/A"],
  "ruta_input": ["N/A"],
  "base_datos": "N/A",
  "tablas_input": ["N/A"],
  "columnas_input": ["N/A"],
  "modificaciones": [
    {
      "titulo": "ComponenteReact.jsx",
      "lineas": [
        {"numero": 45, "texto": "An√°lisis/cambio realizado"}
      ]
    }
  ]
}
```

### **‚öôÔ∏è CAMBIOS BACKEND + FRONTEND**
```json
{
  "microservicio_input": ["NombreMicroservicio"],
  "puerto_input": ["9191"],
  "ruta_input": ["http://localhost:9191/endpoint"],
  "base_datos": "sisecofi",
  "tablas_input": ["tabla1"],
  "columnas_input": ["campo1"]
}
```

### **üìÑ SOLO AN√ÅLISIS DE DOCUMENTACI√ìN**
```json
{
  "microservicio_input": ["N/A"],
  "puerto_input": ["N/A"],
  "ruta_input": ["N/A"],
  "base_datos": "N/A",
  "tablas_input": ["N/A"],
  "columnas_input": ["N/A"],
  "estado": "ANALIZADO",
  "modificaciones": [
    {
      "titulo": "17_3083_ECU_ModuloX.md",
      "lineas": [
        {"numero": 89, "texto": "An√°lisis de especificaci√≥n - Comportamiento actual correcto"}
      ]
    }
  ]
}
```

---

## ‚úÖ CHECKLIST DE VALIDACI√ìN

Antes de entregar cualquier JSON, verificar:

### **üìã CONTENIDO**
- [ ] Todos los campos obligatorios presentes
- [ ] Formato de nombreReporte correcto
- [ ] descripcion_corta ‚â§ 100 caracteres
- [ ] Referencias exactas a ECU/EIU/CRN en descripcion_detallada
- [ ] Array descripcion_problema_solucion_input completo

### **üèóÔ∏è ARQUITECTURA**
- [ ] microservicio_input: Valor v√°lido o N/A
- [ ] puerto_input: N√∫mero real de application.properties o N/A
- [ ] ruta_input: URL completa v√°lida o N/A
- [ ] base_datos: Nombre real o N/A

### **üìÅ ARCHIVOS**
- [ ] TODOS los archivos analizados incluidos en modificaciones
- [ ] Archivos frontend (.jsx, .vue, .ts)
- [ ] Archivos backend (.java, .cs, .py)
- [ ] Documentaci√≥n revisada (.md, .pdf)
- [ ] Configuraci√≥n analizada (.properties, .yml)
- [ ] Informes JSON creados/modificados

### **üß™ PRUEBAS**
- [ ] cantidad_pruebas = length(pruebas_realizadas)
- [ ] Cada prueba con numero, descripcion, detalles
- [ ] tabla_datos apropiada para tipo de cambio
- [ ] Pruebas demuestran problema y/o soluci√≥n

### **üîß MODIFICACIONES**
- [ ] cantidad_archivos = length(modificaciones)
- [ ] N√∫meros de l√≠nea reales y espec√≠ficos
- [ ] Descripci√≥n clara del an√°lisis/cambio
- [ ] Archivos con rutas/nombres exactos

### **üìä CONSISTENCIA**
- [ ] Estado alineado con tipo de hallazgo
- [ ] Campos N/A aplicados correctamente
- [ ] Arrays sin elementos vac√≠os innecesarios
- [ ] Formato JSON v√°lido

---

## üö® ERRORES COMUNES A EVITAR

### **‚ùå NO HACER:**
- Omitir archivos analizados en `modificaciones`
- Usar n√∫meros de l√≠nea gen√©ricos (`"L√≠nea 1"`)
- Dejar campos obligatorios como `null` o `""`
- Mezclar espa√±ol/ingl√©s en nombres de campos
- Crear arrays con elementos vac√≠os innecesarios
- Usar microservicio real cuando es solo frontend

### **‚úÖ S√ç HACER:**
- Incluir TODOS los archivos tocados durante investigaci√≥n
- Usar n√∫meros de l√≠nea espec√≠ficos del c√≥digo real
- Aplicar N/A consistentemente seg√∫n tipo de cambio
- Mantener descripci√≥n_corta concisa y clara
- Referenciar documentaci√≥n con p√°ginas/coordenadas exactas

---

## üìö ARCHIVOS DE REFERENCIA

- **Plantilla base**: `c:\sisecofi\assistants\assistant_dbsisecofi\funciones\plantillas\datos-ejemplo.json`
- **Prompt espec√≠fico**: `c:\sisecofi\docs_sisecofi\promts_\InformeSolucion.txt`
- **Documentaci√≥n fuente**: `c:\sisecofi\docs_sisecofi\docMD_Sisecofi\`

## üèóÔ∏è ESTRUCTURA AUTOM√ÅTICA DE CARPETAS

**NUEVO**: Al ejecutar `npm run sync:json-to-excel`, se crean autom√°ticamente carpetas de reporte:

```
C:\Users\Luis Flores\Desktop\AreaDeTrabajo\Reportes\
‚îî‚îÄ‚îÄ YYYY-MM-DD\
    ‚îî‚îÄ‚îÄ Solucion_Hallazgo#_ModuloFuncionalidad\
        ‚îú‚îÄ‚îÄ README.md                     # Informaci√≥n general
        ‚îú‚îÄ‚îÄ Informe_Solucion.md          # Template para Word  
        ‚îú‚îÄ‚îÄ docs\
        ‚îÇ   ‚îî‚îÄ‚îÄ checklist_validacion.md  # Lista de validaciones
        ‚îú‚îÄ‚îÄ evidencias\                  # Capturas de pantalla
        ‚îú‚îÄ‚îÄ codigo\                      # Archivos modificados
        ‚îî‚îÄ‚îÄ pruebas\                     # Casos de prueba
```

**Configuraci√≥n**: Usar variable de entorno `CARPETA_REPORTES` para personalizar ubicaci√≥n base.

---

## üîÑ PROCESO DE ACTUALIZACI√ìN

1. **Analizar hallazgo** seg√∫n documentaci√≥n ECU/EIU/CRN
2. **Identificar archivos** involucrados (c√≥digo + documentaci√≥n)
3. **Determinar tipo** de cambio (frontend/backend/solo an√°lisis)
4. **Aplicar reglas N/A** seg√∫n tipo identificado
5. **Completar estructura** JSON siguiendo esta especificaci√≥n
6. **Validar contra checklist** antes de entregar
7. **Verificar consistencia** t√©cnica y gramatical

---

**Versi√≥n**: 1.0  
**Fecha**: 12/11/2025  
**√öltima actualizaci√≥n**: Adici√≥n de reglas N/A y registro obligatorio de archivos analizados